let Datastore = require('nedb');
let db = new Datastore({
	filename: 'System.db',
	autoload: true
});
/*-------------------------------------------------------------------------------------------------------*/




/*-------------------------------------------------------------------------------------------------------*/
module.exports.createGrades = function (classNameArray , level_array) {
	return new Promise(function (resolve , reject) {
		let level_arr = level_array.split('-');
		let classNameArr = classNameArray.split(',');		
		let app = {
			className: classNameArr ,
			gradeLevel: level_arr

		};
		db.insert(app , function (err , newDoc) {
			if(!err){
				resolve("done");
			}else{
				console.log(err)
				reject(err);
			}
		});
	});
};
/*-------------------------------------------------------------------------------------------------------*/
module.exports.updateClassName = function (id, oldClass , newClass) {
	return new Promise(function (resolve , reject) {
		db.update({
			_id:id
		},{$set: {'className.${oldClass}': newClass}},{},function (err,numReplaced) {
			if(!err){
				resolve("done");
			}else{
				reject(err);
			}
		});
	});
};
/*-------------------------------------------------------------------------------------------------------*/
module.exports.updateClassLevel = function (id, oldLevel , newLevel) {
	return new Promise(function (resolve , reject) {
		db.update({
			_id:id
		},{$set: {'gradeLevel.${oldLevel}': newLevel}},{},function (err,numReplaced) {
			if(!err){
				resolve("done");
			}else{
				reject(err);
			}
		});
	});
};
/*---------------------------------------############################------------------------------------*/
/*-------------------------------------------------------------------------------------------------------*/


/*-------------------------------------------------------------------------------------------------------*/



/*-------------------------------------------------------------------------------------------------------*/



/*-------------------------------------------------------------------------------------------------------*/



/*-------------------------------------------------------------------------------------------------------*/


/*-------------------------------------------------------------------------------------------------------*/


/*-------------------------------------------------------------------------------------------------------*/


/*-------------------------------------------------------------------------------------------------------*/

/*-------------------------------------------------------------------------------------------------------*/

/*-------------------------------------------------------------------------------------------------------*/




/*-------------------------------------------------------------------------------------------------------*/


/*---------------------------------------############################------------------------------------*/
/*-------------------------------------------------------------------------------------------------------*/


/*-------------------------------------------------------------------------------------------------------*/



/*-------------------------------------------------------------------------------------------------------*/



/*-------------------------------------------------------------------------------------------------------*/



/*-------------------------------------------------------------------------------------------------------*/


/*-------------------------------------------------------------------------------------------------------*/


/*-------------------------------------------------------------------------------------------------------*/


/*-------------------------------------------------------------------------------------------------------*/

/*-------------------------------------------------------------------------------------------------------*/
